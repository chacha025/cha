<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>撮影アプリ</title>
    <style>
      /* 変更点含むCSSは上記に記載 */
    </style>
  </head>
  <body>
    <header>
      <div id="menu-icon">&#9776;</div>
      <nav id="nav-menu">
        <ul>
          <li>撮影方法</li>
          <li>利用規約</li>
        </ul>
      </nav>
    </header>
    <div class="overlay" id="overlay"></div> <!-- 追加: オーバーレイ要素 -->
    <!-- その他の画面要素 -->
    <!-- 撮影画面 -->
    <div class="scr" id="shooting">
      <p id="shootingtext">前面を撮影してください</p>
      <div class="camera-container">
        <video id="video" autoplay muted playsinline></video>
        <div>
          <img class="guide-frame" src="maruma-ku-illust3.png" alt="ガイド" />
          <div id="timer">5</div> <!-- 追加: タイマー表示 -->
        </div>
        <button id="capture">撮影</button>
        <button id="toggle-camera">カメラ切り替え</button>
        <canvas id="canvas" style="display: none"></canvas>
      </div>
    </div>
    <!-- その他の画面要素 -->
    <script>
      // 初期化およびカメラの設定コード

      // タイマーの追加
      document.getElementById("capture").addEventListener("click", () => {
        let timer = document.getElementById("timer");
        timer.style.display = "block"; // タイマーを表示
        let count = 5;
        let countdown = setInterval(() => {
          timer.textContent = count;
          if (count === 0) {
            clearInterval(countdown);
            timer.style.display = "none"; // タイマーを非表示
            captureImage(); // 写真を撮影
          }
          count--;
        }, 1000); // 1秒ごとにカウントダウン
      });

      // メニューの表示/非表示制御
      document.addEventListener("DOMContentLoaded", function () {
        var menuIcon = document.getElementById("menu-icon");
        var navMenu = document.getElementById("nav-menu");
        var overlay = document.getElementById("overlay"); // 追加: オーバーレイ要素

        menuIcon.addEventListener("click", function () {
          if (navMenu.classList.contains("show")) {
            navMenu.classList.remove("show");
            navMenu.style.height = "0"; // メニューを非表示にするとき高さを0に
            overlay.classList.remove("show"); // オーバーレイを非表示
          } else {
            navMenu.classList.add("show");
            navMenu.style.height = navMenu.scrollHeight + "px"; // メニューの高さを内容に合わせて設定
            overlay.classList.add("show"); // オーバーレイを表示
          }
        });

        overlay.addEventListener("click", function () {
          navMenu.classList.remove("show");
          navMenu.style.height = "0"; // メニューを非表示にするとき高さを0に
          overlay.classList.remove("show"); // オーバーレイを非表示
        });
      });
    </script>
  </body>
</html>
