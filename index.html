<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>アバター型紙 撮影アプリ</title>
    <!-- フォントの埋め込みコード -->

    <link rel="stylesheet" href="style.css" />
    <!-- CSSファイルをリンク -->
  </head>

  <body>
    <header style="background-image: url('images/header.png')">
      <!-- <h3>タブメニュー</h3> -->
      <button id="back-button">
        <img src="images/backbtn.png" alt="戻る" />
      </button>

      <!-- インジケーターがでます -->
      <span id="indicator"></span>

      <div id="menu-icon">
        <!-- &#9776; -->
        <img src="images/menuicon.png" alt="メニュー" />
      </div>
      <nav id="nav-menu">
        <ul style="background-image: url(images/tabmenu_backg.png)">
          <li id="li1">
            <!-- 服の種類選択画面に戻る -->
            <img src="images/menu_1.png" alt="服の種類選択画面に戻る" />
          </li>
          <li id="li2">
            <!-- アプリ概要 -->
            <img src="images/menu_2.png" alt="アプリ概要" />
          </li>
          <li id="li3">
            <!-- 利用規約 -->
            <img src="images/menu_3.png" alt="利用規約" />
          </li>
        </ul>
      </nav>
    </header>
    <!-- 追加: オーバーレイ要素 -->
    <div class="overlay" id="overlay"></div>

    <!-- 規約画面 scr0 -->
    <!-- 規約は別にして、スタート画面にする -->
    <div class="scr" id="kiyaku">
      <!-- <h3>―　このアプリでできること　―</h3>
      <p>
        服の画像を用いて、アバターの衣装テンプレートの<br />
        デザインを加工できます。
      </p>
      <h3>―　手順　―</h3>

      <div id="tezyun">
        <p>①　服を準備します <br /></p>
        <p>②　作成する服の種類を以下から選択してください <br /></p>
        <p>トップス／ボトムス／ワンピース <br /></p>
        <p>③　画面の指示に従い服を撮影してください<br /></p>
        <p>※前面、背面など、パーツごとに撮影します</p>
        <p>④　完成したテンプレートを確認してください<br /></p>
        <p>
          ⑤　④のテンプレートをメタバースアプリにアップロードして使用してください
        </p>
      </div> -->
      <img
        class="text"
        src="images/text_gaiyou.png"
        alt="このアプリでできること"
      />
      <button id="kiyakudoui">
        <img src="images/startbtn.png" alt="スタート" />
      </button>
    </div>

    <!-- タイプ選択画面 scr1 -->
    <div class="scr" id="typeselect">
      <!-- <p>服の種類を選んでください</p> -->
      <img
        class="text"
        src="images/text_1.png"
        alt="服の種類と撮影方法を選んでください"
      />
      <!-- 9/16 -->
      <div id="typeselectbtns">
        <button
          id="tops"
          class="topbottom"
          onclick="toggleVisibility('tops-buttons')"
        >
          <img src="images/topsbtn.png" alt="トップス" />
        </button>
        <button
          id="hiddenbottom"
          class="topbottom"
          onclick="toggleVisibility('bottoms-buttons')"
        >
          <img src="images/bottomsbtn.png" alt="ボトムス" />
        </button>
        <button id="dress">
          <img src="images/dressbtn.png" alt="ワンピース" />
        </button>

        <!-- 子ボタン: トップス -->
        <div class="hidden-buttons" id="tops-buttons">
          <button id="outcamera">
            <img src="images/outcamera.png" alt="置く" />
          </button>
          <button id="incamera">
            <img src="images/incamera.png" alt="着用" />
          </button>
        </div>

        <!-- 子ボタン: ボトムス -->
        <div class="hidden-buttons" id="bottoms-buttons">
          <button id="bottom_outcamera">
            <img src="images/bottom_out.png" alt="置く" />
          </button>
        </div>
      </div>
      <!-- <div id="typeselectbtns">
        <button id="tops">
          <img src="images/topsbtn.png" alt="トップス" />
        </button>
        <button id="bottoms">
          <img src="images/bottomsbtn.png" alt="ボトムス" />
        </button>
        <button id="dress">
          <img src="images/dressbtn.png" alt="ワンピース" />
        </button>
      </div> -->
    </div>
    <!-- 撮影方法選択画面 scr2 -->
    <div class="scr" id="cameraselect">
      <p>完成版ではこの画面は使用しない</p>
      <!-- 外カメ内カメ変更ボタン -->
      <!-- <button class="topbottom">
        <img src="images/topsbtn.png" alt="トップス" />
      </button>
      <button id="hiddenbottom" class="topbottom" style="display: none">
        <img src="images/bottomsbtn.png" alt="ボトムス" />
      </button>
      <button id="outcamera">
        <img src="images/outcamera.png" alt="置く" />
      </button>
      <button id="incamera">
        <img src="images/incamera.png" alt="着用" />
      </button> -->
    </div>

    <!-- トップス画面orボトムス画面　(テンプレ選択) scr3 -->
    <div class="scr" id="tempselect">
      <!-- <p>服の種類を選択してください</p> -->
      <img
        class="text"
        src="images/text_2.png"
        alt="テンプレートを選んでください"
      />
      <div id="button-container" class="scroll-box">
        <div class="f_area">
          <!-- ボタンがここに追加される(横スクロール) -->
        </div>
      </div>

      <button id="temp">デバッグ用ボタン</button>
    </div>
    <!-- 撮影注意画面 scr4 -->
    <div class="scr" id="Beforeshooting">
      <img class="text" src="images/text_3.png" alt="撮影時の注意点" />
      <!-- <p>撮影時の注意点</p>
      <p>
        今から3回（前面・背面・袖）撮影します<br />
        　　　　　　 ー　撮影場所　ー<br />
        服の柄がしっかりと映る<br />
        明るい場所で撮影してください。<br />

        <br />
        ー　撮影方法　ー<br />
        服のガイドが赤色で表示されます。<br />
        少しはみ出すように撮影してください。<br />
      </p> -->
      <button id="startshoot">
        <img src="images/satueikaisi.png" alt="撮影開始" />
      </button>
    </div>
    <!-- 撮影画面 scr5 -->
    <div class="scr" id="shooting">
      <img
        class="text"
        id="shootingtext"
        src="images/text_4.png"
        alt="撮影してください"
      />

      <!-- <p>※タップでガイドの色が変わります</p> -->
      <!-- カメラ本体 -->
      <div class="camera-container">
        <video id="video" autoplay muted playsinline></video>
        <div>
          <!-- ガイドフレーム -->
          <img class="guide-frame" src="" alt="フレーム画像がでます" />
          <!-- 追加: タイマー表示 -->
          <div id="timer">5</div>
        </div>
      </div>
      <!-- ↓撮影のための描画キャンバス -->
      <canvas id="canvas" style="visibility: hidden"></canvas>

      <!-- 撮影ボタン類 -->
      <div class="btnGroup">
        <button id="upbtn"><img src="images/uploadbtn.png" alt="img" /></button>
        <button id="capture">
          <img src="images/capturebtn.png" alt="撮影" />
        </button>
        <button id="toggle-camera">
          <img src="images/toggle.png" alt="切替" />
        </button>
      </div>
    </div>

    <!-- 確認画面（前） scr6 -->
    <div class="scr" id="previewF">
      <!-- <p>プレビュー（前）</p> -->

      <div class="photostyle">
        <img id="photoF" alt="ここに撮影した前面画像がでます" />
        <div class="previewbtns">
          <button class="retakestyle" id="RetakeF">
            <img src="images/retake.png" alt="撮りなおす" />
          </button>
          <button id="nextshoot">
            <img src="images/nextShot.png" alt="保存して進む" />
          </button>
        </div>
      </div>
    </div>
    <!-- 確認画面（背） scr7 -->
    <div class="scr" id="previewB">
      <!-- <p>プレビュー（背）</p> -->
      <div class="photostyle">
        <img id="photoB" alt="ここに撮影した背面画像がでます" />
        <div class="previewbtns">
          <button class="retakestyle" id="RetakeB">
            <img src="images/retake.png" alt="撮りなおす" />
          </button>
          <button id="Shootingfinish">
            <img src="images/nextShot.png" alt="保存して進む" />
          </button>
        </div>
      </div>
    </div>
    <!-- トップスの場合の袖選択画面3つ  scr8-->
    <div class="scr" id="sleeve1">
      <!-- <p>袖と背面部分は<br />同じデザイン（色や柄）ですか</p> -->
      <img class="text" src="images/text_6.png" alt="袖と背面部分は" />
      <button onclick="toggleChildButtons('sleeve1-yes')">
        <img src="images/sleevebtn_1.png" alt="同じ色や柄" />
      </button>
      <button id="sleeveParent" onclick="handleAnswer('no', 'sleeve1')">
        <img
          src="images/sleevebtn_2.png"
          alt="袖だけ違う色や柄（重ね着含む）"
        />
      </button>
      <!-- 子ボタン: 袖1-同じ色柄 -->
      <div class="child-buttons" id="sleeve1-yes" style="display: none">
        <button onclick="handleAnswer('yes', 'sleeve3')">
          <img src="images/sleevebtn_3.png" alt="背面にデザインが入っている" />
        </button>
        <button onclick="handleAnswer('no', 'sleeve3')">
          <img
            src="images/sleevebtn_4.png"
            alt="背面にデザインが入っていない"
          />
        </button>
      </div>
    </div>
    <!--トップスの場合の袖選択画面3つ  scr9  -->
    <div class="scr" id="sleeve2">
      <!-- <p>袖部分を撮影してください</p>
      <p>柄がある場合・・・</p> -->
      <img
        class="text"
        src="images/text_7.png"
        alt="袖部分を撮影してください"
      />
      <!-- カメラ本体 -->
      <div class="camera-container">
        <video id="video2" autoplay muted playsinline></video>
        <div>
          <!-- ガイドフレーム -->
          <img class="guide-frame2" src="" alt="袖フレーム画像がでます" />
          <!-- 追加: タイマー表示 -->
          <div id="timer">5</div>
        </div>
      </div>
      <!-- ↓撮影のための描画キャンバス -->
      <canvas id="canvas2" style="visibility: hidden"></canvas>

      <!-- 撮影ボタン類 -->
      <div class="btnGroup">
        <button id="upbtn2">
          <img src="images/uploadbtn.png" alt="img" />
        </button>
        <button id="capture2">
          <img src="images/capturebtn.png" alt="撮影" />
        </button>
        <button id="toggle-camera2">
          <img src="images/toggle.png" alt="切替" />
        </button>
      </div>
    </div>
    <!--トップスの場合の袖選択画面3つ  scr10  -->
    <div class="scr" id="sleeve3">
      <!-- <p>この画像をテンプレートに使用します</p> -->

      <div class="photostyle">
        <img id="photoS" alt="ここに撮影した袖画像がでます" />
        <div class="previewbtns">
          <button class="retakestyle" id="RetakeS">
            <img src="images/retake.png" alt="撮りなおす" />
          </button>
          <button id="sleeveFinish">
            <img src="images/nextShot.png" alt="保存して進む" />
          </button>
        </div>
      </div>
      <canvas id="input" style="display: none"></canvas>
      <canvas id="output" style="visibility: hidden"></canvas>
    </div>

    <!-- 確認画面（最終）scr11 -->
    <div class="scr" id="finalconfirmation">
      <!-- <p>完成したテンプレート</p> -->
      <div class="text_8_9-div">
        <img class="text" src="images/text_8.png" alt="完成したテンプレート" />
      </div>
      <div class="result-image-div">
        <img
          class="result-image"
          src="images/kansei_demo.png"
          alt="完成した型紙画像"
        />
      </div>

      <div class="previewbtns">
        <button id="retakeAll">
          <img src="images/retakeAllbtn.png" alt="最初から撮り直す" />
        </button>
        <a id="download"
          ><img src="images/downloadbtn.png" alt="ダウンロード"
        /></a>
      </div>
    </div>

    <!-- 最終画面 scr12 -->
    <div class="scr" id="final-screen">
      <div class="text_8_9-div">
        <img
          class="text"
          src="images/text_9_1.png"
          alt="作成したテンプレートは"
        />
        <p>「 <span id="templateValue"></span> 」</p>
        <img
          id="text_9_2"
          src="images/text_9_2.png"
          alt="ダウンロードしたテンプレートはメタバースアプリにアップロードすることで使用可能です"
        />
      </div>
      <div class="result-image-div">
        <img
          class="result-image"
          src="images/kansei_demo.png"
          alt="完成した型紙画像"
        />
      </div>
      <button id="typeselectbtn">
        <img src="images/typeselectbtn.png" alt="他のテンプレートを作成する" />
      </button>
      <button onclick="closeapp()">
        <img src="images/closebtn.png" alt="アプリを終了する" />
      </button>
    </div>

    <div class="scr" id="gaiyouTab">
      <!-- メニューからの遷移画面 scr13 -->
      <h3>―　このアプリでできること　―</h3>
      <p>
        服の画像を用いて、アバターの衣装テンプレートのデザインを加工できます。
      </p>
      <h3>―　手順　―</h3>

      <p>
        ①　服を準備します <br />
        ②　作成する服の種類を以下から選択してください <br />
        トップス／ボトムス／ワンピース <br />
        ③　画面の指示に従い服を<br />
        ④ <br />
        ⑤＝＝＝＝
      </p>
      <button class="TabBack">
        <img src="images/tabbtn.png" alt="前の画面に戻る" />
      </button>
    </div>
    <!-- メニューからの遷移先画面 scr14 -->
    <div class="scr" id="kiyakuTab">
      <p>利用規約</p>
      <button class="TabBack">
        <img src="images/tabbtn.png" alt="前の画面に戻る" />
      </button>
    </div>

    <!-- ここからJS !!! -->
    <script src="script.js"></script>
    <!-- JSファイルをリンク -->
  </body>
</html>
